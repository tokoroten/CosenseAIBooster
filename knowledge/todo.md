# CosenseAIBooster 開発 TODO リスト

## 割り込みTODO
- 音声認識の言語を選択可能にする（英語など）

## 初期セットアップ
- [x] プロジェクトの初期化 (package.json の作成)
- [x] TypeScript の設定 (tsconfig.json)
- [x] ESLint と Prettier の設定
- [x] Chrome 拡張機能のマニフェストファイル (v3) の作成
- [x] ビルドスクリプトの設定 (Webpack)
- [x] プロジェクトディレクトリ構造の作成 (src/, dist/)

## 基本構造の実装
- [x] 拡張機能のアイコンの作成
- [x] バックグラウンドスクリプトの作成
- [x] コンテンツスクリプトの作成
- [x] Cosense (Scrapbox) ページ検出ロジックの実装
- [x] 右側のアイコン欄へのUI追加機能の実装

## 設定画面の実装
- [x] 設定ページのHTML/CSSの作成
- [x] プロンプト管理機能の実装
  - [x] プロンプトの追加機能
  - [x] プロンプトの編集機能
  - [x] プロンプトの削除機能
  - [x] プロンプトの保存機能
- [x] プロンプト適用方法の設定
  - [x] 挿入位置設定 (選択範囲の下 or ページの最下部)
  - [x] モデル選択機能の実装
- [x] 音声入力言語設定の実装
- [x] API設定の実装
  - [x] OpenAI APIキー設定
  - [x] OpenRouter APIキー設定
  - [x] カスタムエンドポイント設定
  - [ ] LocalLLM 接続設定（オプション）
- [x] 設定の保存と読み込み機能の実装 (Chrome Storage APIの利用)

## 音声入力機能の実装
- [x] WebSpeech API を使用した音声認識の実装
- [x] 音声入力UIの作成 (マイクアイコン、状態表示)
- [x] 音声テキストの Cosense への挿入機能
- [x] 音声認識言語の切り替え機能

## プロンプト適用機能の実装
- [x] テキスト選択検出機能の実装
- [x] コンテキストメニューの実装
  - [x] 登録済みプロンプトのメニュー表示
  - [x] プロンプト選択機能
- [x] 選択テキストとプロンプトの処理ロジック実装
- [x] API 呼び出しの実装
  - [x] OpenAI API クライアント
  - [x] OpenRouter API クライアント
  - [x] カスタムエンドポイントクライアント
- [x] 結果の挿入機能の実装
  - [x] 選択範囲の下への挿入ロジック
  - [x] ページ最下部への挿入ロジック

## テストとデバッグ
- [x] 音声認識機能の強化
  - [x] 自動再起動機能の実装
  - [x] 一時停止検出機能の実装
  - [x] エラーハンドリングの改善
- [x] テキスト挿入機能の強化
  - [x] 複数行のテキスト挿入対応
  - [x] エディタへの挿入ロジックの改善
- [ ] 各機能の単体テスト
- [ ] 統合テスト
- [ ] Cosense サイト上での動作確認
- [ ] 様々なブラウザ環境でのテスト

## パッケージングとリリース
- [ ] 拡張機能のビルド
- [ ] パッケージングスクリプトの作成
- [ ] Chrome ウェブストアへの公開準備
- [ ] ドキュメント作成

## 追加機能 (オプション)
- [ ] LocalLLM 接続機能の拡張
- [ ] プロンプトのカテゴリ分け
- [ ] プロンプトのインポート/エクスポート機能
- [ ] 複数言語対応
